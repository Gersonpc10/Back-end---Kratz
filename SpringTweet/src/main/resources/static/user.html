<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spring Tweet - Usuários</title>

    <!-- Adicione esses links para incluir o Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>

<body class="container mt-5">
    <h1>Spring Tweet - Usuários</h1>

    <ul id="userList" class="list-group"></ul>

    <!-- Link para a página newuser.html -->
    <a href="newuser.html" class="btn btn-primary mt-3">Novo Usuário</a>

    <script>
        // Função para carregar a lista de usuários ao carregar a página
        window.onload = async function () {
            await loadUsers();
        };

        async function loadUsers() {
            try {
                const response = await fetch('http://localhost:8080/api/users');
                const users = await response.json();

                const userList = document.getElementById('userList');

                // Limpa a lista antes de adicionar os usuários
                userList.innerHTML = '';

                // Adiciona cada usuário à lista
                users.forEach(user => {
                    const listItem = document.createElement('li');
                    listItem.textContent = `ID: ${user.userid}, Nome de Usuário: ${user.screenName}, Função: ${user.role}`;
                    listItem.className = 'list-group-item';
                    userList.appendChild(listItem);
                });
            } catch (error) {
                console.error('Error:', error);
            }
        }
    </script>
</body>

</html>
